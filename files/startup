--MES - Monochrome Entertainment System
-- Credits:
-- Mr_Iron2 - Concept, startup, Menu, Compatibility Help [with Wrapper]
-- Gonow32 - Fixes and Colour to Monochrome Wrapper
-- MultMine: Code cleanup
-- Luca_S - Compatibility List [with Wrapper]

function center(y,string)
  local w,h = term.getSize()
  local x = (w/2)-(#string/2)
  term.setCursorPos(x,y)
  print(string)
end

function centerSlow(y,string)
  local w,h = term.getSize()
  local x = (w/2)-(#string/2)
  term.setCursorPos(x,y)
  textutils.slowPrint(string)
end

local current = term.current()
function term.current()
  return window.create(current,1,1,current.getSize())
end

local oldback = term.setBackgroundColour
function term.setBackgroundColor(colour)
  if colour == 1 then
    oldback(colour)
  else
    oldback(colours.black)
  end
end

term.setBackgroundColour = term.setBackgroundColor

local oldtext = term.setTextColour
function term.setTextColor(colour)
  if colour == 32768 then
    oldtext(colour)
  else
    oldtext(colours.white)
  end  
end

term.setTextColour = term.setTextColor

if disk.isPresent("right") then 
  if disk.hasData("right") then 
    if fs.exists("/disk/game") then 
      shell.run("/disk/game")
    end
  end
elseif disk.isPresent("left") then 
  if disk.hasData("left") then 
    if fs.exists("/disk/game") then 
      shell.run("/disk/game")
    end
  end
elseif disk.isPresent("top") then 
  if disk.hasData("top") then 
    if fs.exists("/disk/game") then 
      shell.run("/disk/game")
    end
  end
elseif disk.isPresent("bottom") then 
  if disk.hasData("bottom") then 
    if fs.exists("/disk/game") then 
      shell.run("/disk/game")
    end
  end
elseif disk.isPresent("front") then 
  if disk.hasData("front") then 
    if fs.exists("/disk/game") then 
      shell.run("/disk/game")
    end
  end
elseif disk.isPresent("back") then 
  if disk.hasData("back") then 
    if fs.exists("/disk/game") then 
      shell.run("/disk/game")
    end
  end
end
term.setBackgroundColour(colours.white)
term.clear()
term.setTextColour(colours.black)
center(8,"Welcome to MES.")
sleep(1.25)


local function render()
term.setBackgroundColour(colours.black)
term.setTextColour(colours.white)
center(7,"Press the number above either option")
term.clear()
term.setBackgroundColour(colours.white)
term.setTextColour(colours.black)
center(3,"             ")
center(4,"     MES     ")
center(5,"             ")
term.setCursorPos(5,9)
print("     [1]     ")
term.setCursorPos(5,10)
print("    Disk     ")
term.setCursorPos(5,11)
print("             ")
term.setCursorPos(33,9)
print("     [2]     ")
term.setCursorPos(33,10)
print("   Shutdown  ")
term.setCursorPos(33,11)
print("             ")
end

while true do 
  render()
  local event,key = os.pullEvent("key")
  if key == keys.one then
    term.setBackgroundColour(colours.black)
    term.setTextColour(colours.white)
    term.clear()
    term.setCursorPos(1,1) 
    shell.run("/disk/game")  
  elseif key == keys.two then 
    os.shutdown()
  end
end
